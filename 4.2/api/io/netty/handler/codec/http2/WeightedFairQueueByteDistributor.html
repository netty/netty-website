<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) on Thu Feb 05 11:55:46 CET 2026 -->
<title>WeightedFairQueueByteDistributor (Netty API Reference (4.2.10.Final))</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-02-05">
<meta name="description" content="declaration: package: io.netty.handler.codec.http2, class: WeightedFairQueueByteDistributor">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="io.netty.handler.codec.http2.WeightedFairQueueByteDistributor class">
<meta name="keywords" content="updateStreamableBytes()">
<meta name="keywords" content="updateDependencyTree()">
<meta name="keywords" content="distribute()">
<meta name="keywords" content="allocationQuantum()">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/WeightedFairQueueByteDistributor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">io.netty.handler.codec.http2</a></li>
<li><a href="WeightedFairQueueByteDistributor.html" class="current-selection">WeightedFairQueueByteDistributor</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E(io.netty.handler.codec.http2.Http2Connection)" tabindex="0">WeightedFairQueueByteDistributor(Http2Connection)</a></li>
<li><a href="#%3Cinit%3E(io.netty.handler.codec.http2.Http2Connection,int)" tabindex="0">WeightedFairQueueByteDistributor(Http2Connection, int)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)" tabindex="0">updateStreamableBytes(StreamByteDistributor.StreamState)</a></li>
<li><a href="#updateDependencyTree(int,int,short,boolean)" tabindex="0">updateDependencyTree(int, int, short, boolean)</a></li>
<li><a href="#distribute(int,io.netty.handler.codec.http2.StreamByteDistributor.Writer)" tabindex="0">distribute(int, StreamByteDistributor.Writer)</a></li>
<li><a href="#allocationQuantum(int)" tabindex="0">allocationQuantum(int)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class WeightedFairQueueByteDistributor" class="title">Class WeightedFairQueueByteDistributor</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.netty.handler.codec.http2.WeightedFairQueueByteDistributor</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">WeightedFairQueueByteDistributor</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></span></div>
<div class="block">A <a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2"><code>StreamByteDistributor</code></a> that is sensitive to stream priority and uses
<a href="https://en.wikipedia.org/wiki/Weighted_fair_queueing">Weighted Fair Queueing</a> approach for distributing
bytes.
<p>
Inspiration for this distributor was taken from Linux's
<a href="https://www.kernel.org/doc/Documentation/scheduler/sched-design-CFS.txt">Completely Fair Scheduler</a>
to model the distribution of bytes to simulate an "ideal multi-tasking CPU", but in this case we are simulating
an "ideal multi-tasking NIC".
<p>
Each write operation will use the <a href="#allocationQuantum(int)"><code>allocationQuantum(int)</code></a> to know how many more bytes should be allocated
relative to the next stream which wants to write. This is to balance fairness while also considering goodput.</div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h3 id="nested-classes-inherited-from-class-io.netty.handler.codec.http2.StreamByteDistributor">Nested classes/interfaces inherited from interface&nbsp;<a href="StreamByteDistributor.html#nested-class-summary" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></h3>
<code><a href="StreamByteDistributor.StreamState.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.StreamState</a>, <a href="StreamByteDistributor.Writer.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.Writer</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(io.netty.handler.codec.http2.Http2Connection)" class="member-name-link">WeightedFairQueueByteDistributor</a><wbr>(<a href="Http2Connection.html" title="interface in io.netty.handler.codec.http2">Http2Connection</a>&nbsp;connection)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(io.netty.handler.codec.http2.Http2Connection,int)" class="member-name-link">WeightedFairQueueByteDistributor</a><wbr>(<a href="Http2Connection.html" title="interface in io.netty.handler.codec.http2">Http2Connection</a>&nbsp;connection,
 int&nbsp;maxStateOnlySize)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allocationQuantum(int)" class="member-name-link">allocationQuantum</a><wbr>(int&nbsp;allocationQuantum)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the amount of bytes that will be allocated to each stream.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#distribute(int,io.netty.handler.codec.http2.StreamByteDistributor.Writer)" class="member-name-link">distribute</a><wbr>(int&nbsp;maxBytes,
 <a href="StreamByteDistributor.Writer.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.Writer</a>&nbsp;writer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Distributes up to <code>maxBytes</code> to those streams containing streamable bytes and
iterates across those streams to write the appropriate bytes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateDependencyTree(int,int,short,boolean)" class="member-name-link">updateDependencyTree</a><wbr>(int&nbsp;childStreamId,
 int&nbsp;parentStreamId,
 short&nbsp;weight,
 boolean&nbsp;exclusive)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Explicitly update the dependency tree.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)" class="member-name-link">updateStreamableBytes</a><wbr>(<a href="StreamByteDistributor.StreamState.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.StreamState</a>&nbsp;state)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when the streamable bytes for a stream has changed.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(io.netty.handler.codec.http2.Http2Connection)">
<h3>WeightedFairQueueByteDistributor</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">WeightedFairQueueByteDistributor</span><wbr><span class="parameters">(<a href="Http2Connection.html" title="interface in io.netty.handler.codec.http2">Http2Connection</a>&nbsp;connection)</span></div>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(io.netty.handler.codec.http2.Http2Connection,int)">
<h3>WeightedFairQueueByteDistributor</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">WeightedFairQueueByteDistributor</span><wbr><span class="parameters">(<a href="Http2Connection.html" title="interface in io.netty.handler.codec.http2">Http2Connection</a>&nbsp;connection,
 int&nbsp;maxStateOnlySize)</span></div>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)">
<h3>updateStreamableBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateStreamableBytes</span><wbr><span class="parameters">(<a href="StreamByteDistributor.StreamState.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.StreamState</a>&nbsp;state)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="StreamByteDistributor.html#updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)">StreamByteDistributor</a></code></span></div>
<div class="block">Called when the streamable bytes for a stream has changed. Until this
method is called for the first time for a give stream, the stream is assumed to have no
streamable bytes.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="StreamByteDistributor.html#updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)">updateStreamableBytes</a></code>&nbsp;in interface&nbsp;<code><a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="updateDependencyTree(int,int,short,boolean)">
<h3>updateDependencyTree</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateDependencyTree</span><wbr><span class="parameters">(int&nbsp;childStreamId,
 int&nbsp;parentStreamId,
 short&nbsp;weight,
 boolean&nbsp;exclusive)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="StreamByteDistributor.html#updateDependencyTree(int,int,short,boolean)">StreamByteDistributor</a></code></span></div>
<div class="block">Explicitly update the dependency tree. This method is called independently of stream state changes.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="StreamByteDistributor.html#updateDependencyTree(int,int,short,boolean)">updateDependencyTree</a></code>&nbsp;in interface&nbsp;<code><a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></code></dd>
<dt>Parameters:</dt>
<dd><code>childStreamId</code> - The stream identifier associated with the child stream.</dd>
<dd><code>parentStreamId</code> - The stream identifier associated with the parent stream. May be <code>0</code>,
                      to make <code>childStreamId</code> and immediate child of the connection.</dd>
<dd><code>weight</code> - The weight which is used relative to other child streams for <code>parentStreamId</code>. This value
              must be between 1 and 256 (inclusive).</dd>
<dd><code>exclusive</code> - If <code>childStreamId</code> should be the exclusive dependency of <code>parentStreamId</code>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="distribute(int,io.netty.handler.codec.http2.StreamByteDistributor.Writer)">
<h3>distribute</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">distribute</span><wbr><span class="parameters">(int&nbsp;maxBytes,
 <a href="StreamByteDistributor.Writer.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor.Writer</a>&nbsp;writer)</span>
                   throws <span class="exceptions"><a href="Http2Exception.html" title="class in io.netty.handler.codec.http2">Http2Exception</a></span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="StreamByteDistributor.html#distribute(int,io.netty.handler.codec.http2.StreamByteDistributor.Writer)">StreamByteDistributor</a></code></span></div>
<div class="block">Distributes up to <code>maxBytes</code> to those streams containing streamable bytes and
iterates across those streams to write the appropriate bytes. Criteria for
traversing streams is undefined and it is up to the implementation to determine when to stop
at a given stream.

<p>The streamable bytes are not automatically updated by calling this method. It is up to the
caller to indicate the number of bytes streamable after the write by calling
<a href="StreamByteDistributor.html#updateStreamableBytes(io.netty.handler.codec.http2.StreamByteDistributor.StreamState)"><code>StreamByteDistributor.updateStreamableBytes(StreamState)</code></a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="StreamByteDistributor.html#distribute(int,io.netty.handler.codec.http2.StreamByteDistributor.Writer)">distribute</a></code>&nbsp;in interface&nbsp;<code><a href="StreamByteDistributor.html" title="interface in io.netty.handler.codec.http2">StreamByteDistributor</a></code></dd>
<dt>Parameters:</dt>
<dd><code>maxBytes</code> - the maximum number of bytes to write.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if there are still streamable bytes that have not yet been written,
otherwise <code>false</code>.</dd>
<dt>Throws:</dt>
<dd><code><a href="Http2Exception.html" title="class in io.netty.handler.codec.http2">Http2Exception</a></code> - If an internal exception occurs and internal connection state would otherwise be
corrupted.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allocationQuantum(int)">
<h3>allocationQuantum</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">allocationQuantum</span><wbr><span class="parameters">(int&nbsp;allocationQuantum)</span></div>
<div class="block">Sets the amount of bytes that will be allocated to each stream. Defaults to 1KiB.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>allocationQuantum</code> - the amount of bytes that will be allocated to each stream. Must be &gt; 0.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2008&#x2013;2026 <a href="https://netty.io/">The Netty Project</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
